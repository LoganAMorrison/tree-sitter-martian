================================================================================
Stage Split Using
================================================================================

stage SUM_SQUARES(
    in  float[] values,
    out float   sum,
    src comp    "sum_squares",
) split (
    in  float   value,
    out float   value,
) using (
    mem_gb  = 4.0,
    threads = -16,
)

--------------------------------------------------------------------------------

(source_file
  (stage_declaration
    name: (identifier)
    (stage_body
      (parameter_list
        (in_param
          type: (parameter_type
            (array_type
              (parameter_type
                (primitive_type))))
          name: (identifier))
        (out_param
          type: (parameter_type
            (primitive_type))
          name: (identifier)))
      (src_stm
        type: (src_lang)
        source_path: (string)))
    (split_param_list
      (parameter_list
        (in_param
          type: (parameter_type
            (primitive_type))
          name: (identifier))
        (out_param
          type: (parameter_type
            (primitive_type))
          name: (identifier))))
    (resources
      (resource_list
        (resource_binding
          resource: (resource_type)
          value: (resource_value
            (float)))
        (resource_binding
          resource: (resource_type)
          value: (resource_value
            (integer)))))))
